<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>뿌동숲 시세표 - 공사 중</title>
  <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: "Jua", sans-serif;
      background-color: #f8f3c8;
      text-align: center;
      padding: 20px;
      margin: 0;
    }
    h1 {
      font-size: 2.5em;
      color: #4caf50;
      margin: 20px 0;
    }
    .container {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.1);
      max-width: 600px;
      margin: auto;
    }
    .notice {
      font-size: 1.2em;
      color: #b33c3c;
      margin-top: 20px;
    }
    .visitor-counter {
      font-size: 1em;
      color: #006400;
      font-weight: bold;
      margin-top: 20px;
    }
    footer {
      margin-top: 30px;
      font-size: 0.8em;
      color: #808080;
    }
  </style>
</head>
<body>
  <h1>뿌동숲 시세표</h1>
  
  <div class="container">
    <p class="notice">현재 홈페이지 개편 작업 중입니다.<br> 2025.02.26까지 공사 진행 예정입니다.</p>
    <p class="notice">이용에 불편을 드려 죄송합니다.</p>
  </div>
  
  <div class="visitor-counter">방문자 수: 로딩 중...</div>
  
  <footer>
    © 2025 뿌동이. All Rights Reserved.<br>
    제작: 뿌동이 주대 | Instagram: <a href="https://www.instagram.com/ppudong2/" target="_blank">@ppudong2</a>
  </footer>
  
  <script>
    // Firebase SDK 연결 (방문자 수 유지)
    const firebaseConfig = {
      apiKey: "AIzaSyA-EdZtqc1b9gp67OliSdJ7bWPNgEGUM7A",
      authDomain: "ppudong-price-list.firebaseapp.com",
      projectId: "ppudong-price-list",
      storageBucket: "ppudong-price-list.firebasestorage.app",
      messagingSenderId: "581105229110",
      appId: "1:581105229110:web:870b7730b5b1271302a797",
      measurementId: "G-6JYJ3W5KEH"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    
    async function updateVisitorCount() {
      try {
        const docRef = db.collection("visitorData").doc("count");
        await db.runTransaction(async (transaction) => {
          const docSnapshot = await transaction.get(docRef);
          if (docSnapshot.exists) {
            const data = docSnapshot.data();
            document.querySelector(".visitor-counter").textContent = `방문자 수: today ${data.today} / total ${data.total}`;
          } else {
            document.querySelector(".visitor-counter").textContent = "방문자 수: 정보 없음";
          }
        });
      } catch (error) {
        console.error("Failed to load visitor count:", error);
      }
    }
    window.onload = updateVisitorCount;
  </script>
</body>
</html>
